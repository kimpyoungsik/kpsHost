FROM python:3.7.7
# python 3.7.7 버전의 컨테이너 이미지를 base이미지

MAINTAINER  backend-django <wskyland@gmail.com>
# Docker의 컨테이너를 생성 및 관리 하는 사람의 정보를 기입해줍니다.
RUN pip3 install --upgrade pip
RUN pip3 install pymssql 
# python:3.7.7 이미지 상에 django를 pip를 통해 설치합니다.
RUN pip3 install django

WORKDIR /usr/src/app
# WORKDIR은 cd와 같은 명령으로, 작업 경로를 /usr/src/app으로 이동합니다.
# CMD에서 설정한 실행 파일이 실행될 디렉터리를 지정해주어야 한다.

COPY . .

WORKDIR ./wasdjango
# manage.py를 실행할 수 있는 디렉토리로 이동합니다.

CMD ["python3", "manage.py", "runserver", "0.0.0.0:20120"]
# 이동한 디렉토리에서 django를 가동시켜주는 코드를 작성합니다. 여기서 port는 20120로 실행시키겠습니다.

EXPOSE 20120

#ENTRYPOINT ["/app/start"]  # /app/start 파일을 실행시킵니다.
#!/bin/bash
#
#

# django 서버의 포트를 20120 지정하였으므로 Docker의 컨테이너 또한 20120 포트를 열어줍니다.
#docker build -t was:0.1 .
#docker run -d -p 8000:20120  was:0.1
# 정상 확인후 이미지 저장
#docker image save <옵션> <이미지1, 이미지2, 이미지 n...>
#docker image save -o back_2019.tar image1 image2
#docker rmi 5efb46d4d911
#이미지 가져오기
#docker load -i frond-nginx.tar





#docker hub에 업로드 https://blog.siner.io/2019/02/25/django-docker-custom-image/